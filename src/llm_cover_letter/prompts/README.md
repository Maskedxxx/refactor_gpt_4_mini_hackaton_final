# Prompts System ‚Äî –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å–µ–º.

## üìã –ü–æ—Ç–æ–∫ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–º–ø—Ç–∞

```mermaid
flowchart TD
    A[CoverLetterOptions] --> B[LLMCoverLetterGenerator.generate]
    C[ResumeInfo] --> B
    D[VacancyInfo] --> B
    
    B --> E[–°–ª–∏—è–Ω–∏–µ –æ–ø—Ü–∏–π —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏]
    E --> F[ContextBuilder.build]
    E --> G[Formatter: resume_block]
    E --> H[Formatter: vacancy_block]
    
    F --> I[PromptBuilder.build]
    G --> I
    H --> I
    
    I --> J[templates.get_template]
    J --> K[template.render]
    K --> L[Prompt –≥–æ—Ç–æ–≤ –¥–ª—è LLM]
```

## üîß –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —ç—Ç–∞–ø–æ–≤

### 1. –°–ª–∏—è–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (service.py:82-90)

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
1. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (`options`) ‚Äî –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env** (`LLMCoverLetterSettings`) ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã
3. **–•–∞—Ä–¥–∫–æ–¥** ‚Äî fallback –∑–Ω–∞—á–µ–Ω–∏—è

```python
# –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–∏—è–Ω–∏—è CoverLetterOptions + LLMCoverLetterSettings
opts = CoverLetterOptions(
    language="ru",                    # –∏–∑ settings.language (COVER_LETTER_LANGUAGE)
    prompt_version="cover_letter.v1", # –∏–∑ settings.prompt_version (COVER_LETTER_PROMPT_VERSION)
    temperature=0.4,                  # –∏–∑ settings.temperature (COVER_LETTER_TEMPERATURE)
    quality_checks=False,             # –∏–∑ settings.quality_checks (COVER_LETTER_QUALITY_CHECKS)
    # + –ª—é–±—ã–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ–ø—Ü–∏–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤—ã—à–µ
)
```

### 2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (builders.py:36-64)

`DefaultContextBuilder.build()` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ò—Å—Ç–æ—á–Ω–∏–∫ | –õ–æ–≥–∏–∫–∞ |
|------------|----------|--------|
| `company_size` | `VacancyInfo.description` | **–ê–≤—Ç–æ-–¥–µ—Ç–µ–∫—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:**<br/>‚Ä¢ "—Å—Ç–∞—Ä—Ç–∞–ø", "startup" ‚Üí `STARTUP`<br/>‚Ä¢ "–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è", "—Ö–æ–ª–¥–∏–Ω–≥" ‚Üí `ENTERPRISE`<br/>‚Ä¢ "–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è", "global" ‚Üí `LARGE`<br/>‚Ä¢ –∏–Ω–∞—á–µ ‚Üí `MEDIUM` |
| `company_name` | `VacancyInfo.company_name` | –ü—Ä—è–º–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `position_title` | `VacancyInfo.name` | –ü—Ä—è–º–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `language` | `CoverLetterOptions.language` | –ò–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫/–æ–ø—Ü–∏–π |
| `length` | `CoverLetterOptions.length` | –ò–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫/–æ–ø—Ü–∏–π |
| `role_hint` | `CoverLetterOptions.role_hint` + `ResumeInfo.title` | **–ê–≤—Ç–æ-–¥–µ—Ç–µ–∫—Ü–∏—è –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ:**<br/>1. –ë–µ—Ä–µ—Ç—Å—è `options.role_hint`<br/>2. –ï—Å–ª–∏ None ‚Üí –∞–Ω–∞–ª–∏–∑ `resume.title`<br/>3. –ü–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ‚Üí `RoleType` |
| `company_tone_instruction` | `company_size` ‚Üí `mappings.py` | **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞** |
| `role_adaptation_instruction` | `effective_role_hint` ‚Üí `mappings.py` | **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞** |

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–¥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–ª–æ–∫–æ–≤):**
```python
{
    "company_size": "STARTUP",           # –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è
    "company_name": "TechCorp",          # –∏–∑ vacancy.company_name
    "position_title": "Senior Python Developer", # –∏–∑ vacancy.name
    "language": "ru",                    # –∏–∑ options
    "length": "MEDIUM",                  # –∏–∑ options
    "role_hint": "DEVELOPER",            # –∞–≤—Ç–æ-–¥–µ—Ç–µ–∫—Ü–∏—è –∏–∑ resume.title="Python Developer"
    # –ù–æ–≤—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏:
    "company_tone_instruction": "–±–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º...",
    "role_adaptation_instruction": "**DEVELOPER**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ, –ø—Ä–æ–µ–∫—Ç–∞—Ö..."
}
```

### 3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ (formatter.py)

**–†–µ–∑—é–º–µ ‚Üí resume_block:**
```
## –ü—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
**–§–ò–û:** –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω–æ–≤–∏—á
**–û–±—â–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:** 5 –ª–µ—Ç 3 –º–µ—Å.

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
**–ñ–µ–ª–∞–µ–º–∞—è –¥–æ–ª–∂–Ω–æ—Å—Ç—å:** Python Developer

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏
Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Python, Django, FastAPI

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python
- Django
- PostgreSQL
- Docker

### –û–ø—ã—Ç –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
1. Senior Python Developer | –ö–æ–º–ø–∞–Ω–∏—è ABC (2020-01 - –ø–æ –Ω–∞—Å—Ç.)
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã...
```

**–í–∞–∫–∞–Ω—Å–∏—è ‚Üí vacancy_block:**
```
## –í–∞–∫–∞–Ω—Å–∏—è
**–ü–æ–∑–∏—Ü–∏—è:** Senior Python Developer
**–ö–æ–º–ø–∞–Ω–∏—è:** TechCorp

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏
- Backend Developer

### –û–ø–∏—Å–∞–Ω–∏–µ
–ò—â–µ–º –æ–ø—ã—Ç–Ω–æ–≥–æ Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Å—Ç–∞—Ä—Ç–∞–ø–µ...

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏
- Python
- FastAPI
- Microservices
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ extra_context (builders.py)

**–°–ª—É—á–∞–π 1 ‚Äî —Å–ª–æ–≤–∞—Ä—å:**
```python
options.extra_context = {"deadline": "—Å—Ä–æ—á–Ω–æ", "remote": "–ø–æ–ª–Ω–∞—è —É–¥–∞–ª–µ–Ω–∫–∞"}
# –†–µ–∑—É–ª—å—Ç–∞—Ç:
"- deadline: —Å—Ä–æ—á–Ω–æ\n- remote: –ø–æ–ª–Ω—ã–π —É–¥–∞–ª–µ–Ω–∫–∞"
```

**–°–ª—É—á–∞–π 2 ‚Äî –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å:**
```python
options.extra_context = {} –∏–ª–∏ None
# –†–µ–∑—É–ª—å—Ç–∞—Ç:
"(–Ω–µ—Ç)"
```

**–°–ª—É—á–∞–π 3 ‚Äî —Å—Ç—Ä–æ–∫–∞ (–ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å):**
```python
options.extra_context = "–ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–µ–∑–¥—É –≤ –ú–æ—Å–∫–≤—É"
# –†–µ–∑—É–ª—å—Ç–∞—Ç:
"–ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–µ–∑–¥—É –≤ –ú–æ—Å–∫–≤—É"
```

### 5. –°–±–æ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ (builders.py)

`DefaultPromptBuilder.build()` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å—ë:

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```python
context = {
    # –ò–∑ ContextBuilder:
    "company_size": "STARTUP",
    "company_name": "TechCorp", 
    "position_title": "Senior Python Developer",
    "language": "ru",
    "length": "MEDIUM",
    "role_hint": "DEVELOPER",
    "company_tone_instruction": "–±–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º...",
    "role_adaptation_instruction": "**DEVELOPER**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ, –ø—Ä–æ–µ–∫—Ç–∞—Ö...",
    
    # –ò–∑ Formatter:
    "resume_block": "## –ü—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞\n**–§–ò–û:** ...",
    "vacancy_block": "## –í–∞–∫–∞–Ω—Å–∏—è\n**–ü–æ–∑–∏—Ü–∏—è:** ...",
    "extra_context_block": "- deadline: —Å—Ä–æ—á–Ω–æ\n- remote: –ø–æ–ª–Ω—ã–π —É–¥–∞–ª–µ–Ω–∫–∞"
}
```

**–§–∏–Ω–∞–ª—å–Ω—ã–π System prompt (v1):**
```
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å–µ–º –≤ IT.
–£—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø–æ–∑–∏—Ü–∏–∏. –ü–∏—à–∏ –Ω–∞ —è–∑—ã–∫–µ: ru.

## –ö–û–ù–¢–ï–ö–°–¢ –ö–û–ú–ü–ê–ù–ò–ò
–†–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏: STARTUP; –ö–æ–º–ø–∞–Ω–∏—è: TechCorp; –ü–æ–∑–∏—Ü–∏—è: Senior Python Developer.
–ñ–µ–ª–∞–µ–º–∞—è –¥–ª–∏–Ω–∞: MEDIUM.

## –¢–û–ù–ê–õ–¨–ù–û–°–¢–¨
–±–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º...

## –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û –†–û–õ–ò
**DEVELOPER**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ, –ø—Ä–æ–µ–∫—Ç–∞—Ö...
```

**–§–∏–Ω–∞–ª—å–Ω—ã–π System prompt (v2):**
```
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å–µ–º –≤ IT.
–°–æ–∑–¥–∞–≤–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Ä–æ–ª–∏.

## –ö–û–ù–¢–ï–ö–°–¢ –ó–ê–î–ê–ß–ò
–Ø–∑—ã–∫ –ø–∏—Å—å–º–∞: ru
–ö–æ–º–ø–∞–Ω–∏—è: TechCorp (—Ä–∞–∑–º–µ—Ä: STARTUP)
–ü–æ–∑–∏—Ü–∏—è: Senior Python Developer
–ñ–µ–ª–∞–µ–º–∞—è –¥–ª–∏–Ω–∞: MEDIUM

## –¢–û–ù–ê–õ–¨–ù–û–°–¢–¨ –ò –°–¢–ò–õ–¨
–±–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º...

## –°–ü–ï–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –§–û–ö–£–°
**DEVELOPER**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ, –ø—Ä–æ–µ–∫—Ç–∞—Ö...

## –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ö–ê–ß–ï–°–¢–í–£
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ –∫–æ–º–ø–∞–Ω–∏—é –∏ —Ä–æ–ª—å
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –æ–ø—ã—Ç–∞, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- –ò–∑–±–µ–≥–∞–π –æ–±—â–∏—Ö —Ñ—Ä–∞–∑ –∏ —à–∞–±–ª–æ–Ω–Ω–æ—Å—Ç–∏
- –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
- –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞—Ö
```

**–§–∏–Ω–∞–ª—å–Ω—ã–π User prompt:**
```
## –î–∞–Ω–Ω—ã–µ

### –†–µ–∑—é–º–µ:
<resume_start>
## –ü—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
**–§–ò–û:** –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω–æ–≤–∏—á
**–û–±—â–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:** 5 –ª–µ—Ç 3 –º–µ—Å.
...
</resume_end>

### –í–∞–∫–∞–Ω—Å–∏—è:
<vacancy_start>
## –í–∞–∫–∞–Ω—Å–∏—è
**–ü–æ–∑–∏—Ü–∏—è:** Senior Python Developer
**–ö–æ–º–ø–∞–Ω–∏—è:** TechCorp
...
</vacancy_start>

### –î–æ–ø. –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- deadline: —Å—Ä–æ—á–Ω–æ
- remote: –ø–æ–ª–Ω—ã–π —É–¥–∞–ª–µ–Ω–∫–∞

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π JSON —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ EnhancedCoverLetter.
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env
COVER_LETTER_PROMPT_VERSION=cover_letter.v1    # –í–µ—Ä—Å–∏—è —à–∞–±–ª–æ–Ω–∞
COVER_LETTER_TEMPERATURE=0.4                   # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ LLM
COVER_LETTER_QUALITY_CHECKS=false             # –í–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
COVER_LETTER_LANGUAGE=ru                       # –Ø–∑—ã–∫ –ø–∏—Å—å–º–∞
COVER_LETTER_MODEL_NAME=gpt-4o-mini           # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å LLM
```

## üîÑ –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–º–ø—Ç–∞:**
   ```python
   # –í templates.py
   if version == "cover_letter.v2":
       return PromptTemplate(...)
   ```

2. **–ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   ```python
   # –í DefaultContextBuilder.build()
   ctx["my_variable"] = analyze_something(vacancy)
   ```

3. **–ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è company_size:**
   ```python
   class MyContextBuilder(IContextBuilder):
       def build(self, resume, vacancy, options):
           # –°–≤–æ—è –ª–æ–≥–∏–∫–∞
   ```

4. **–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –±–ª–æ–∫–æ–≤:**
   ```python
   # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å format_resume_for_cover_letter()
   ```

## üéØ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã –≤ –¥–µ–π—Å—Ç–≤–∏–∏

### –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏

```python
# –ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
detect_role_from_title("Senior Python Developer")     # ‚Üí RoleType.DEVELOPER
detect_role_from_title("ML Engineer")                 # ‚Üí RoleType.ML_ENGINEER  
detect_role_from_title("QA Automation Engineer")      # ‚Üí RoleType.QA_ENGINEER
detect_role_from_title("Team Lead Backend")           # ‚Üí RoleType.MANAGER
detect_role_from_title("DevOps Engineer")             # ‚Üí RoleType.DEVOPS
```

### –ü—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è STARTUP + DEVELOPER

**System Prompt (cover_letter.v2):**
```
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å–µ–º –≤ IT.
–°–æ–∑–¥–∞–≤–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Ä–æ–ª–∏.

## –ö–û–ù–¢–ï–ö–°–¢ –ó–ê–î–ê–ß–ò
–Ø–∑—ã–∫ –ø–∏—Å—å–º–∞: ru
–ö–æ–º–ø–∞–Ω–∏—è: TechStartup (—Ä–∞–∑–º–µ—Ä: STARTUP)
–ü–æ–∑–∏—Ü–∏—è: Senior Python Developer
–ñ–µ–ª–∞–µ–º–∞—è –¥–ª–∏–Ω–∞: MEDIUM

## –¢–û–ù–ê–õ–¨–ù–û–°–¢–¨ –ò –°–¢–ò–õ–¨
–±–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º. –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å, 
–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±—ã—Å—Ç—Ä—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º, —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç —Å –ø–µ—Ä–≤—ã—Ö –¥–Ω–µ–π.

## –°–ü–ï–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –§–û–ö–£–°
**DEVELOPER**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ, –ø—Ä–æ–µ–∫—Ç–∞—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, 
code review, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –£–ø–æ–º–∏–Ω–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, 
–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞.

## –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ö–ê–ß–ï–°–¢–í–£
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ –∫–æ–º–ø–∞–Ω–∏—é –∏ —Ä–æ–ª—å
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –æ–ø—ã—Ç–∞, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- –ò–∑–±–µ–≥–∞–π –æ–±—â–∏—Ö —Ñ—Ä–∞–∑ –∏ —à–∞–±–ª–æ–Ω–Ω–æ—Å—Ç–∏
- –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
- –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞—Ö
```

### –ü—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è ENTERPRISE + DATA_SCIENTIST

**System Prompt (cover_letter.v2):**
```
## –¢–û–ù–ê–õ–¨–ù–û–°–¢–¨ –ò –°–¢–ò–õ–¨
–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å. –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, 
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º, –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–ø–ª–∞–µ–Ω—Å–æ–º –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏.

## –°–ü–ï–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –§–û–ö–£–°  
**DATA_SCIENTIST**: –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ, –∏–Ω—Å–∞–π—Ç–∞—Ö, 
A/B —Ç–µ—Å—Ç–∞—Ö, –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞—Ö. –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π—Ç–µ –≤–ª–∏—è–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏—è, 
—Ä–∞–±–æ—Ç—É —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é v1
COVER_LETTER_PROMPT_VERSION=cover_letter.v1

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é v2 —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏
COVER_LETTER_PROMPT_VERSION=cover_letter.v2
```

## üìä –ú–∞–ø–ø–∏–Ω–≥–∏

### –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏

- **STARTUP**: –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ, —ç–Ω—Ç—É–∑–∏–∞–∑–º, –±—ã—Å—Ç—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **MEDIUM/LARGE**: –±–∞–ª–∞–Ω—Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞ –∏ —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç–∏  
- **ENTERPRISE**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã, –ø—Ä–æ—Ü–µ—Å—Å—ã

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º —Ä–æ–ª–µ–π

- **DEVELOPER**: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ–¥
- **ML_ENGINEER**: –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –º–æ–¥–µ–ª–∏, –ø–∞–π–ø–ª–∞–π–Ω—ã
- **DATA_SCIENTIST**: –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏–Ω—Å–∞–π—Ç—ã
- **QA_ENGINEER**: –∫–∞—á–µ—Å—Ç–≤–æ, –±–∞–≥–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **DEVOPS**: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **DESIGNER**: UX-–º–µ—Ç—Ä–∏–∫–∏, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –∫–æ–Ω–≤–µ—Ä—Å–∏—è
- **MANAGER**: –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ—Ü–µ—Å—Å—ã, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ
